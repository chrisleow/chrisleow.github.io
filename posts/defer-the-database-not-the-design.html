<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defer the Database, Not the Design | The Chris Frequency</title>
    <link rel="stylesheet" href="https://chrisfrequency.com/assets/style.css">
    <link rel="icon" href="https://chrisfrequency.com/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://chrisfrequency.com/favicon.svg">
    <link rel="alternate" type="application/rss+xml" title="The Chris Frequency" href="https://chrisfrequency.com/rss.xml">
    <link rel="canonical" href="https://chrisfrequency.com/posts/defer-the-database-not-the-design">
</head>
<body>
    <div class="container">
        <header class="site-header">
            <a href="https://chrisfrequency.com/" class="site-title">ðŸ“¡ The Chris Frequency</a>
            <nav>
                <a href="https://chrisfrequency.com/" class="">Home</a>
                <a href="https://chrisfrequency.com/about" class="">About</a>
            </nav>
        </header>

        <main>
            
<article class="post">
    
    
    <nav class="post-navigation post-navigation-top">
        <div class="nav-previous">
            
                <a href="https://chrisfrequency.com/posts/introducing-the-resonance-protocol" rel="prev">
                    <span class="meta-nav">&larr;</span> Introducing the Resonance Protocol
                </a>
            
        </div>
        <div class="nav-next">
            
        </div>
    </nav>
    


    <header class="post-header">
        <h1>Defer the Database, Not the Design</h1>
        <p class="post-meta">
            <time datetime="2026-02-10">
                February 10, 2026
            </time>
        </p>
    </header>

    <div class="post-content">
        <h2>Introduction</h2>
<p>The modern scaling landscape is overwhelming. Queues, event buses, microservices, serverless, Kubernetes. The list of &quot;essential&quot; technologies grows longer every year. It's very easy to get lost in the choices, and even easier to feel pressure to adopt whatever patterns are currently deemed &quot;industry standard&quot;. Everyone else seems to be doing it, so it must be right.</p>
<p>Right?</p>
<h3>The Stack Overflow Anomaly</h3>
<p>Consider Stack Overflow. For over a decade, they debugged the world's software problems using <a href="https://nickcraver.com/blog/2016/02/17/stack-overflow-the-architecture-2016-edition/">a handful of servers</a> and a surprisingly simple architecture. No microservices. No event sourcing. No exotic databases. Just a well-designed system built on proven, boring technology that scaled to tens of millions of users.</p>
<p>How did they achieve this? And more importantly, why does their approach feel like such an anomaly in today's architecture discussions?</p>
<h3>The Danger Zone</h3>
<p>The answer lies in understanding a critical but often overlooked danger zone: the space between <strong>over-optimisation</strong> and <strong>under-optimisation</strong>.</p>
<p><strong>Over-optimise</strong> too early, and you'll drown in premature complexity, vendor lock-in, and crushing cognitive overhead. Your team will spend more time wrestling with distributed systems than building features.</p>
<p><strong>Under-optimise</strong>, and you'll build fragile and ad-hoc architectures that buckle under the first real load, forcing expensive rewrites that could have been avoided.</p>
<p>There's a third trap worth naming: <strong>&quot;career-driven development&quot;</strong>. We've all seen it ... the choice to adopt a hot new technology not because it solves a real problem, but because it looks good on LinkedIn. These decisions are costly, and they're more common than we'd like to admit.</p>
<h3>A Different Path</h3>
<p>This article offers a different path, built on one principle: <strong>defer the database, not the design</strong>. Model the problem first. Understand how it will be accessed. Then choose storage later â€” when the constraints are clear and the costs are justified.</p>
<p>The mechanism that makes this possible? <strong>Your data layer</strong>.</p>
<hr />
<h2>Data Modelling: The Foundation</h2>
<p>Data modelling is often treated as an &quot;also-ran&quot; in system design; something rushed through in favour of picking databases and frameworks. Yet it's arguably <strong>the most important architectural decision you'll make</strong>. Get the domain model right, and everything else becomes easier. Get it wrong, and you'll spend years fighting technical debt.</p>
<h3>Storage-Agnostic Design</h3>
<p>The key principle is deceptively simple: <strong>model the business problem first</strong>.</p>
<ul>
<li>Create types that represent meaningful domain concepts</li>
<li>Think in terms of entities, relationships, and operations</li>
<li><strong>Don't think about storage yet</strong></li>
</ul>
<p>That decision comes later, once you understand how these models will actually be used.</p>
<h3>Keep It Simple</h3>
<p>This approach draws from Domain-Driven Design, but in simplified form:</p>
<ul>
<li><strong>Clear types</strong>: Models should clearly refer to meaningful types within your system</li>
<li><strong>Extendable but not complex</strong>: They should grow without becoming over-engineered</li>
<li><strong>Business-aligned</strong>: Focus on clarity and business alignment, not database schemas</li>
</ul>
<p>Consider a simple e-commerce system. Here's what storage-agnostic domain modelling looks like:</p>
<div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Product</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">ProductId</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">price</span><span class="p">:</span> <span class="n">Money</span>
    <span class="n">inventory_count</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">OrderId</span>
    <span class="n">customer</span><span class="p">:</span> <span class="n">Customer</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">OrderItem</span><span class="p">]</span>
    <span class="n">total</span><span class="p">:</span> <span class="n">Money</span>
    <span class="n">status</span><span class="p">:</span> <span class="n">OrderStatus</span>  <span class="c1"># PENDING, CONFIRMED, SHIPPED, DELIVERED</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Customer</span><span class="p">:</span>
    <span class="nb">id</span><span class="p">:</span> <span class="n">CustomerId</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">shipping_addresses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Address</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">OrderItem</span><span class="p">:</span>
    <span class="n">product</span><span class="p">:</span> <span class="n">Product</span>
    <span class="n">quantity</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">price_at_purchase</span><span class="p">:</span> <span class="n">Money</span>  <span class="c1"># Capture historical pricing</span>
</pre></div>
<p>Notice what's missing: no database fields, no <code>save()</code> methods, no ORM annotations. Just clean domain concepts that model the business problem. These models don't know or care whether they'll live in PostgreSQL, MongoDB, or flat files. That's intentional.</p>
<p>Storage decisions come later, after we understand touchpoints.</p>
<hr />
<h2>Data Touchpoints: Understanding Access Patterns</h2>
<p>A <strong>touchpoint</strong> is how your system actually uses the data. Not &quot;what data exists&quot; but rather &quot;how is it accessed&quot;. This includes:</p>
<ul>
<li><strong>Queries</strong>: What data do you read?</li>
<li><strong>Updates</strong>: What data do you write?</li>
<li><strong>Frequency</strong>: How often?</li>
<li><strong>Latency requirements</strong>: How fast must it be?</li>
<li><strong>Volume</strong>: How much data?</li>
</ul>
<p>Understanding touchpoints is the bridge between domain modelling and technology choices.</p>
<h3>Why Touchpoints Matter</h3>
<p>Touchpoints reveal your system's <strong>actual constraints</strong>. Different touchpoints have different optimal technologies, and understanding these patterns prevents premature tech choices.</p>
<p>You're not picking technologies based on marketing materials or blog posts, you're picking them based on <strong>measured, understood access patterns</strong>.</p>
<h3>Common Touchpoint Patterns</h3>
<p><strong>Transactional touchpoints</strong> involve complex updates with low latency and ACID requirements. Consider a <code>LegalCase</code> in a case management system: the access pattern is individual records with frequent small modifications. This implies a need for strong consistency and transaction support.</p>
<p><strong>Analytical or reporting touchpoints</strong> are characterised by time-range queries, aggregations, and read-heavy workloads. An <code>AuditReport</code> querying <code>AuditLogItem</code> entries is typical. Scan many records, filter by date or other criteria. These touchpoints are optimised for reads and often benefit from denormalized data structures.</p>
<p><strong>Graph or relational touchpoints</strong> involve traversal operations and relationship-heavy queries. A <code>GraphQuery</code> exploring interconnected data follows edges and performs multi-hop queries. These can be satisfied either by specialized graph databases or by clever relational modelling with recursive queries and smart indexing.</p>
<p>Beyond these three, other common patterns include <strong>high-throughput writes</strong> (constant data ingestion), <strong>time-series data</strong> (temporal queries and trends), and <strong>full-text search</strong> (text matching and ranking). Each has distinct access characteristics that inform technology choices.</p>
<h3>Revisiting Our E-Commerce Example</h3>
<p>Let's examine our earlier domain model through the lens of touchpoints:</p>
<p><strong>Product Catalogue</strong>:</p>
<ul>
<li><strong>Transactional touchpoint</strong>: Frequent updates to <code>inventory_count</code>, price changes</li>
<li><strong>Search touchpoint</strong>: Customers browsing by category, filtering by price range</li>
<li>A single domain model, two very different access patterns</li>
</ul>
<p><strong>Order Processing</strong>:</p>
<ul>
<li><strong>Purely transactional</strong>: ACID properties required</li>
<li>Order creation and inventory deduction must be atomic</li>
<li>Cannot tolerate race conditions during checkout</li>
</ul>
<p><strong>Customer Analytics</strong>:</p>
<ul>
<li><strong>Analytical touchpoint</strong>: Reporting on order history, revenue by segment</li>
<li>The same <code>Order</code> model that required strict transactional guarantees now serves aggregate queries across thousands of records</li>
</ul>
<p><strong>The key observation</strong>: One domain model (<code>Order</code>) can have multiple touchpoint types depending on how it's used. This is why premature technology choices are dangerous. You don't yet know all the ways your data will be accessed.</p>
<h3>The Key Insight</h3>
<p><strong>Touchpoints determine constraints, not technologies.</strong></p>
<ul>
<li>You can satisfy most touchpoints with multiple tech choices</li>
<li>The right choice depends on <strong>scale</strong>, <strong>team expertise</strong>, and <strong>cost</strong></li>
<li>A single PostgreSQL instance can handle transactional, analytical, and even graph workloads ... until it can't</li>
</ul>
<p><strong>The data layer ensures that &quot;until&quot; doesn't become a crisis.</strong></p>
<hr />
<h2>The Data Layer: Your Scaling Insurance</h2>
<p>If you're unfamiliar with the concept of a data access layer, I've written about it in depth in <a href="/posts/how-to-build-a-data-access-layer">How to Build a Data Access Layer</a>.</p>
<h3>The Provider Pattern (In Brief)</h3>
<p>The core principles:</p>
<ul>
<li><strong>Immutable domain models</strong>: No ActiveRecord patterns, no embedded queries</li>
<li><strong>Provider pattern</strong>: Well-defined interface accepting and returning domain types</li>
<li><strong>Dependency injection</strong>: Application code doesn't know about storage implementation</li>
</ul>
<h3>Why This Matters for Scaling</h3>
<p>The data layer is your <strong>abstraction boundary</strong>:</p>
<ul>
<li>Application code depends on the <strong>interface</strong>, not the implementation</li>
<li>You can swap storage technologies without touching application logic</li>
<li>When that analytical touchpoint outgrows PostgreSQL, you can introduce an analytics database behind the data layer whilst the application remains blissfully unaware</li>
</ul>
<h3>Your Insurance Policy</h3>
<p>Think of the data layer as insurance:</p>
<ul>
<li>You're not optimising for scale today</li>
<li>You're creating <strong>optionality</strong> for tomorrow</li>
<li>It's your insurance against lock-in; technological, architectural, and strategic</li>
</ul>
<hr />
<h2>The Scaling Pathway</h2>
<p>The core philosophy is simple: <strong>defer decisions, not preparation</strong>.</p>
<ul>
<li>Don't pick technologies for hypothetical scale</li>
<li>Do create the structure that allows future evolution</li>
<li>This distinction is everything</li>
</ul>
<h3>A Pattern I've Seen Repeatedly</h3>
<p>I've worked on multiple systems where this philosophy was either followed or ignored. The contrast is stark.</p>
<h4>The Multi-Database Trap</h4>
<p>An early-stage product used MySQL, MongoDB, and other databases for different features. Each choice seemed logical at the time. Different tools for different jobs.</p>
<p>But when analytics requirements emerged (they always do), joining data across systems became a costly nightmare. <strong>Months were spent building ETL pipelines and synchronisation layers</strong> that a unified data layer would have avoided entirely.</p>
<h4>The Boring-Tech Winner</h4>
<p>A high-throughput transaction processing system built with a standard web framework and SQL. Nothing exotic.</p>
<p>It achieved <strong>low-latency performance</strong> by understanding its touchpoints and building a clean data layer from the start. When scale demands grew, the abstraction made evolution straightforward:</p>
<ul>
<li>Read replicas were added</li>
<li>Indexes were optimised</li>
<li>High-volume touchpoints were migrated to specialized storage</li>
<li>All without rewriting the application</li>
</ul>
<p><strong>The lesson</strong>: Premature technology diversity costs more than premature optimisation.</p>
<h3>Start Simple</h3>
<p>Default to <strong>boring, proven technology</strong>:</p>
<ul>
<li><strong><a href="/posts/sqlite-secret-weapon">SQLite</a></strong> for side projects and MVPs</li>
<li><strong>Single PostgreSQL instance</strong> for most startups</li>
<li><strong>Sharded SQL with customer affinity</strong> for B2B SaaS products</li>
</ul>
<p>&quot;Boring technology&quot; is a feature, not a bug.</p>
<h4>Why Simple Wins Early</h4>
<ul>
<li><strong>Lower cognitive overhead</strong> whilst iterating on the product</li>
<li><strong>Well-understood failure modes</strong> and debugging</li>
<li><strong>Easy to hire for</strong> with abundant documentation</li>
<li><strong>Optimisation is cheap</strong> when you're small</li>
</ul>
<p>Adding an index or a read replica is a day's work, not a quarter-long migration project.</p>
<h3>The Evolution in Pictures</h3>
<p>The same data layer at three stages of scale. The interface never changes â€” only what lives behind it does.</p>
<p><strong>Stage 1: The boring monolith.</strong> One database. Handles the vast majority of real-world products.</p>
<div class="mermaid-diagram"><svg id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" class="flowchart" style="max-width: 444.890625px;" viewBox="0 0 444.890625 88.72885131835938" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><style xmlns="http://www.w3.org/1999/xhtml">@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css");</style><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:1px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg p{margin:0;}#mermaid-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg .cluster-label text{fill:#333;}#mermaid-svg .cluster-label span{color:#333;}#mermaid-svg .cluster-label span p{background-color:transparent;}#mermaid-svg .label text,#mermaid-svg span{fill:#333;color:#333;}#mermaid-svg .node rect,#mermaid-svg .node circle,#mermaid-svg .node ellipse,#mermaid-svg .node polygon,#mermaid-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg .rough-node .label text,#mermaid-svg .node .label text,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-anchor:middle;}#mermaid-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-svg .rough-node .label,#mermaid-svg .node .label,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-align:center;}#mermaid-svg .node.clickable{cursor:pointer;}#mermaid-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-svg .arrowheadPath{fill:#333333;}#mermaid-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg .cluster text{fill:#333;}#mermaid-svg .cluster span{color:#333;}#mermaid-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-svg rect.text{fill:none;stroke-width:0;}#mermaid-svg .icon-shape,#mermaid-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .icon-shape p,#mermaid-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-svg .icon-shape rect,#mermaid-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="mermaid-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path d="M96.469,44.364L100.635,44.364C104.802,44.364,113.135,44.364,120.802,44.364C128.469,44.364,135.469,44.364,138.969,44.364L142.469,44.364" id="L_App_DL_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_App_DL_0" data-points="W3sieCI6OTYuNDY4NzUsInkiOjQ0LjM2NDQyNTY1OTE3OTY5fSx7IngiOjEyMS40Njg3NSwieSI6NDQuMzY0NDI1NjU5MTc5Njl9LHsieCI6MTQ2LjQ2ODc1LCJ5Ijo0NC4zNjQ0MjU2NTkxNzk2OX1d" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M284.734,44.364L288.901,44.364C293.068,44.364,301.401,44.364,309.068,44.364C316.734,44.364,323.734,44.364,327.234,44.364L330.734,44.364" id="L_DL_PG_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_DL_PG_0" data-points="W3sieCI6Mjg0LjczNDM3NSwieSI6NDQuMzY0NDI1NjU5MTc5Njl9LHsieCI6MzA5LjczNDM3NSwieSI6NDQuMzY0NDI1NjU5MTc5Njl9LHsieCI6MzM0LjczNDM3NSwieSI6NDQuMzY0NDI1NjU5MTc5Njl9XQ==" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_App_DL_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_DL_PG_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-App-0" transform="translate(52.234375, 44.36442565917969)"><rect class="basic label-container" style="" x="-44.234375" y="-27" width="88.46875" height="54"/><g class="label" style="" transform="translate(-14.234375, -12)"><rect/><foreignObject width="28.46875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>App</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-DL-1" transform="translate(215.6015625, 44.36442565917969)"><rect class="basic label-container" style="" x="-69.1328125" y="-27" width="138.265625" height="54"/><g class="label" style="" transform="translate(-39.1328125, -12)"><rect/><foreignObject width="78.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Data Layer</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PG-2" transform="translate(385.8125, 44.36442565917969)"><path d="M0,11.242949511624708 a51.078125,11.242949511624708 0,0,0 102.15625,0 a51.078125,11.242949511624708 0,0,0 -102.15625,0 l0,50.24294951162471 a51.078125,11.242949511624708 0,0,0 102.15625,0 l0,-50.24294951162471" class="basic label-container" style="" label-offset-y="11.242949511624708" transform="translate(-51.078125, -36.36442426743706)"/><g class="label" style="" transform="translate(-43.578125, -2)"><rect/><foreignObject width="87.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>PostgreSQL</p></span></div></foreignObject></g></g></g></g></g></svg></div>
<p><strong>Stage 2: Augmented.</strong> A search touchpoint outgrows PostgreSQL. ElasticSearch is introduced behind the data layer. The application is unchanged.</p>
<div class="mermaid-diagram"><svg id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" class="flowchart" style="max-width: 455.5625px;" viewBox="0 0 455.5625 213.30963134765625" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><style xmlns="http://www.w3.org/1999/xhtml">@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css");</style><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:1px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg p{margin:0;}#mermaid-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg .cluster-label text{fill:#333;}#mermaid-svg .cluster-label span{color:#333;}#mermaid-svg .cluster-label span p{background-color:transparent;}#mermaid-svg .label text,#mermaid-svg span{fill:#333;color:#333;}#mermaid-svg .node rect,#mermaid-svg .node circle,#mermaid-svg .node ellipse,#mermaid-svg .node polygon,#mermaid-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg .rough-node .label text,#mermaid-svg .node .label text,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-anchor:middle;}#mermaid-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-svg .rough-node .label,#mermaid-svg .node .label,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-align:center;}#mermaid-svg .node.clickable{cursor:pointer;}#mermaid-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-svg .arrowheadPath{fill:#333333;}#mermaid-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg .cluster text{fill:#333;}#mermaid-svg .cluster span{color:#333;}#mermaid-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-svg rect.text{fill:none;stroke-width:0;}#mermaid-svg .icon-shape,#mermaid-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .icon-shape p,#mermaid-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-svg .icon-shape rect,#mermaid-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="mermaid-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path d="M96.469,106.192L100.635,106.192C104.802,106.192,113.135,106.192,120.802,106.192C128.469,106.192,135.469,106.192,138.969,106.192L142.469,106.192" id="L_App_DL_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_App_DL_0" data-points="W3sieCI6OTYuNDY4NzUsInkiOjEwNi4xOTE4MzM0OTYwOTM3NX0seyJ4IjoxMjEuNDY4NzUsInkiOjEwNi4xOTE4MzM0OTYwOTM3NX0seyJ4IjoxNDYuNDY4NzUsInkiOjEwNi4xOTE4MzM0OTYwOTM3NX1d" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M256.709,79.192L265.547,73.387C274.384,67.583,292.059,55.974,305.286,50.169C318.513,44.364,327.292,44.364,331.681,44.364L336.07,44.364" id="L_DL_PG_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_DL_PG_0" data-points="W3sieCI6MjU2LjcwOTMxNzU2MjM1MTksInkiOjc5LjE5MTgzMzQ5NjA5Mzc1fSx7IngiOjMwOS43MzQzNzUsInkiOjQ0LjM2NDQyNTY1OTE3OTY5fSx7IngiOjM0MC4wNzAzMTI1LCJ5Ijo0NC4zNjQ0MjU2NTkxNzk2OX1d" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M256.709,133.192L265.547,138.996C274.384,144.801,292.059,156.41,304.397,162.215C316.734,168.019,323.734,168.019,327.234,168.019L330.734,168.019" id="L_DL_ES_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_DL_ES_0" data-points="W3sieCI6MjU2LjcwOTMxNzU2MjM1MTksInkiOjEzMy4xOTE4MzM0OTYwOTM3NX0seyJ4IjozMDkuNzM0Mzc1LCJ5IjoxNjguMDE5MjQxMzMzMDA3OH0seyJ4IjozMzQuNzM0Mzc1LCJ5IjoxNjguMDE5MjQxMzMzMDA3OH1d" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_App_DL_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_DL_PG_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_DL_ES_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default  " id="flowchart-App-0" transform="translate(52.234375, 106.19183349609375)"><rect class="basic label-container" style="" x="-44.234375" y="-27" width="88.46875" height="54"/><g class="label" style="" transform="translate(-14.234375, -12)"><rect/><foreignObject width="28.46875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>App</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-DL-1" transform="translate(215.6015625, 106.19183349609375)"><rect class="basic label-container" style="" x="-69.1328125" y="-27" width="138.265625" height="54"/><g class="label" style="" transform="translate(-39.1328125, -12)"><rect/><foreignObject width="78.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Data Layer</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PG-2" transform="translate(391.1484375, 44.36442565917969)"><path d="M0,11.242949511624708 a51.078125,11.242949511624708 0,0,0 102.15625,0 a51.078125,11.242949511624708 0,0,0 -102.15625,0 l0,50.24294951162471 a51.078125,11.242949511624708 0,0,0 102.15625,0 l0,-50.24294951162471" class="basic label-container" style="" label-offset-y="11.242949511624708" transform="translate(-51.078125, -36.36442426743706)"/><g class="label" style="" transform="translate(-43.578125, -2)"><rect/><foreignObject width="87.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>PostgreSQL</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-ES-3" transform="translate(391.1484375, 168.0192413330078)"><path d="M0,11.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 a56.4140625,11.8602588529006 0,0,0 -112.828125,0 l0,50.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 l0,-50.8602588529006" class="basic label-container" style="" label-offset-y="11.8602588529006" transform="translate(-56.4140625, -37.2903882793509)"/><g class="label" style="" transform="translate(-48.9140625, -2)"><rect/><foreignObject width="97.828125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ElasticSearch</p></span></div></foreignObject></g></g></g></g></g></svg></div>
<p><strong>Stage 3: Federated at scale.</strong> Regional sharding, dedicated client infrastructure, a proxy layer for routing. The application still sees the same data layer interface.</p>
<div class="mermaid-diagram"><svg id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" class="flowchart" style="max-width: 1023.390625px;" viewBox="0 0.000003814697265625 1023.390625 784.1455078125" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><style xmlns="http://www.w3.org/1999/xhtml">@import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css");</style><style>#mermaid-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-svg .error-icon{fill:#552222;}#mermaid-svg .error-text{fill:#552222;stroke:#552222;}#mermaid-svg .edge-thickness-normal{stroke-width:1px;}#mermaid-svg .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-svg .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg .marker{fill:#333333;stroke:#333333;}#mermaid-svg .marker.cross{stroke:#333333;}#mermaid-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg p{margin:0;}#mermaid-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg .cluster-label text{fill:#333;}#mermaid-svg .cluster-label span{color:#333;}#mermaid-svg .cluster-label span p{background-color:transparent;}#mermaid-svg .label text,#mermaid-svg span{fill:#333;color:#333;}#mermaid-svg .node rect,#mermaid-svg .node circle,#mermaid-svg .node ellipse,#mermaid-svg .node polygon,#mermaid-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg .rough-node .label text,#mermaid-svg .node .label text,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-anchor:middle;}#mermaid-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-svg .rough-node .label,#mermaid-svg .node .label,#mermaid-svg .image-shape .label,#mermaid-svg .icon-shape .label{text-align:center;}#mermaid-svg .node.clickable{cursor:pointer;}#mermaid-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-svg .arrowheadPath{fill:#333333;}#mermaid-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg .cluster text{fill:#333;}#mermaid-svg .cluster span{color:#333;}#mermaid-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-svg rect.text{fill:none;stroke-width:0;}#mermaid-svg .icon-shape,#mermaid-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-svg .icon-shape p,#mermaid-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-svg .icon-shape rect,#mermaid-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="mermaid-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="mermaid-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path d="M164.938,370.661L169.104,370.661C173.271,370.661,181.604,370.661,189.271,370.661C196.938,370.661,203.938,370.661,207.438,370.661L210.938,370.661" id="L_App_DL_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_App_DL_0" data-points="W3sieCI6MTY0LjkzNzUsInkiOjM3MC42NjA2NDQ1MzEyNX0seyJ4IjoxODkuOTM3NSwieSI6MzcwLjY2MDY0NDUzMTI1fSx7IngiOjIxNC45Mzc1LCJ5IjozNzAuNjYwNjQ0NTMxMjV9XQ==" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M353.203,370.661L357.37,370.661C361.536,370.661,369.87,370.661,377.536,370.661C385.203,370.661,392.203,370.661,395.703,370.661L399.203,370.661" id="L_DL_PR_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_DL_PR_0" data-points="W3sieCI6MzUzLjIwMzEyNSwieSI6MzcwLjY2MDY0NDUzMTI1fSx7IngiOjM3OC4yMDMxMjUsInkiOjM3MC42NjA2NDQ1MzEyNX0seyJ4Ijo0MDMuMjAzMTI1LCJ5IjozNzAuNjYwNjQ0NTMxMjV9XQ==" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M493.601,343.661L509.746,296.614C525.89,249.567,558.18,155.472,596.562,108.425C634.945,61.378,679.422,61.378,701.66,61.378L723.898,61.378" id="L_PR_Global_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_PR_Global_0" data-points="W3sieCI6NDkzLjYwMTIxMTExMzk4MTYsInkiOjM0My42NjA2NDQ1MzEyNX0seyJ4Ijo1OTAuNDY4NzUsInkiOjYxLjM3ODI1Nzc1MTQ2NDg0NH0seyJ4Ijo3MjcuODk4NDM3NSwieSI6NjEuMzc4MjU3NzUxNDY0ODQ0fV0=" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M509.157,343.661L522.709,328.919C536.261,314.177,563.365,284.693,580.417,269.951C597.469,255.209,604.469,255.209,607.969,255.209L611.469,255.209" id="L_PR_RegA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_PR_RegA_0" data-points="W3sieCI6NTA5LjE1NjUwNjUzNDkzOTQ3LCJ5IjozNDMuNjYwNjQ0NTMxMjV9LHsieCI6NTkwLjQ2ODc1LCJ5IjoyNTUuMjA4NTgwMDE3MDg5ODR9LHsieCI6NjE1LjQ2ODc1LCJ5IjoyNTUuMjA4NTgwMDE3MDg5ODR9XQ==" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M509.157,397.661L522.709,412.403C536.261,427.145,563.365,456.629,580.417,471.371C597.469,486.113,604.469,486.113,607.969,486.113L611.469,486.113" id="L_PR_RegB_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_PR_RegB_0" data-points="W3sieCI6NTA5LjE1NjUwNjUzNDkzOTQ3LCJ5IjozOTcuNjYwNjQ0NTMxMjV9LHsieCI6NTkwLjQ2ODc1LCJ5Ijo0ODYuMTEyNzA5MDQ1NDEwMTZ9LHsieCI6NjE1LjQ2ODc1LCJ5Ijo0ODYuMTEyNzA5MDQ1NDEwMTZ9XQ==" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/><path d="M493.001,397.661L509.246,448.276C525.49,498.892,557.98,600.124,583.136,650.739C608.292,701.355,626.115,701.355,635.026,701.355L643.938,701.355" id="L_PR_DedA_0" class=" edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_PR_DedA_0" data-points="W3sieCI6NDkzLjAwMTI5NDExMzA4NTEsInkiOjM5Ny42NjA2NDQ1MzEyNX0seyJ4Ijo1OTAuNDY4NzUsInkiOjcwMS4zNTUxNjM1NzQyMTg4fSx7IngiOjY0Ny45Mzc1LCJ5Ijo3MDEuMzU1MTYzNTc0MjE4OH1d" marker-end="url(#mermaid-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_App_DL_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_DL_PR_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_PR_Global_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_PR_RegA_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_PR_RegB_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_PR_DedA_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel "></span></div></foreignObject></g></g></g><g class="nodes"><g class="root" transform="translate(639.9375, 618.5647735595703)"><g class="clusters"><g class="cluster " id="DedA" data-look="classic"><rect style="" x="8" y="8" width="334.984375" height="149.58078002929688"/><g class="cluster-label " transform="translate(104.7890625, 8)"><foreignObject width="141.40625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Client A (Dedicated)</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default  " id="flowchart-PGD-13" transform="translate(94.078125, 82.79039001464844)"><path d="M0,11.242949511624708 a51.078125,11.242949511624708 0,0,0 102.15625,0 a51.078125,11.242949511624708 0,0,0 -102.15625,0 l0,50.24294951162471 a51.078125,11.242949511624708 0,0,0 102.15625,0 l0,-50.24294951162471" class="basic label-container" style="" label-offset-y="11.242949511624708" transform="translate(-51.078125, -36.36442426743706)"/><g class="label" style="" transform="translate(-43.578125, -2)"><rect/><foreignObject width="87.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>PostgreSQL</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-ESD-14" transform="translate(251.5703125, 82.79039001464844)"><path d="M0,11.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 a56.4140625,11.8602588529006 0,0,0 -112.828125,0 l0,50.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 l0,-50.8602588529006" class="basic label-container" style="" label-offset-y="11.8602588529006" transform="translate(-56.4140625, -37.2903882793509)"/><g class="label" style="" transform="translate(-48.9140625, -2)"><rect/><foreignObject width="97.828125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ElasticSearch</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(607.46875, 387.66064453125)"><g class="clusters"><g class="cluster " id="RegB" data-look="classic"><rect style="" x="8" y="8" width="399.921875" height="180.9041290283203"/><g class="cluster-label " transform="translate(147.03125, 8)"><foreignObject width="121.859375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Shared Region B</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default  " id="flowchart-PGB-11" transform="translate(126.546875, 98.45206451416016)"><path d="M0,14.301380121964266 a83.546875,14.301380121964266 0,0,0 167.09375,0 a83.546875,14.301380121964266 0,0,0 -167.09375,0 l0,77.30138012196426 a83.546875,14.301380121964266 0,0,0 167.09375,0 l0,-77.30138012196426" class="basic label-container" style="" label-offset-y="14.301380121964266" transform="translate(-83.546875, -52.95207018294639)"/><g class="label" style="" transform="translate(-76.046875, -14)"><rect/><foreignObject width="152.09375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Sharded PostgreSQL<br />Cluster</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-ESB-12" transform="translate(316.5078125, 98.45206451416016)"><path d="M0,11.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 a56.4140625,11.8602588529006 0,0,0 -112.828125,0 l0,74.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 l0,-74.8602588529006" class="basic label-container" style="" label-offset-y="11.8602588529006" transform="translate(-56.4140625, -49.2903882793509)"/><g class="label" style="" transform="translate(-48.9140625, -14)"><rect/><foreignObject width="97.828125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ElasticSearch<br />Cluster</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(607.46875, 156.7565155029297)"><g class="clusters"><g class="cluster " id="RegA" data-look="classic"><rect style="" x="8" y="8" width="399.921875" height="180.9041290283203"/><g class="cluster-label " transform="translate(147.46875, 8)"><foreignObject width="120.984375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Shared Region A</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default  " id="flowchart-PGA-9" transform="translate(126.546875, 98.45206451416016)"><path d="M0,14.301380121964266 a83.546875,14.301380121964266 0,0,0 167.09375,0 a83.546875,14.301380121964266 0,0,0 -167.09375,0 l0,77.30138012196426 a83.546875,14.301380121964266 0,0,0 167.09375,0 l0,-77.30138012196426" class="basic label-container" style="" label-offset-y="14.301380121964266" transform="translate(-83.546875, -52.95207018294639)"/><g class="label" style="" transform="translate(-76.046875, -14)"><rect/><foreignObject width="152.09375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Sharded PostgreSQL<br />Cluster</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-ESA-10" transform="translate(316.5078125, 98.45206451416016)"><path d="M0,11.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 a56.4140625,11.8602588529006 0,0,0 -112.828125,0 l0,74.8602588529006 a56.4140625,11.8602588529006 0,0,0 112.828125,0 l0,-74.8602588529006" class="basic label-container" style="" label-offset-y="11.8602588529006" transform="translate(-56.4140625, -49.2903882793509)"/><g class="label" style="" transform="translate(-48.9140625, -14)"><rect/><foreignObject width="97.828125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>ElasticSearch<br />Cluster</p></span></div></foreignObject></g></g></g></g><g class="node default  " id="flowchart-App-0" transform="translate(86.46875, 370.66064453125)"><rect class="basic label-container" style="" x="-78.46875" y="-27" width="156.9375" height="54"/><g class="label" style="" transform="translate(-48.46875, -12)"><rect/><foreignObject width="96.9375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Application(s)</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-DL-1" transform="translate(284.0703125, 370.66064453125)"><rect class="basic label-container" style="" x="-69.1328125" y="-27" width="138.265625" height="54"/><g class="label" style="" transform="translate(-39.1328125, -12)"><rect/><foreignObject width="78.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Data Layer</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-PR-2" transform="translate(484.3359375, 370.66064453125)"><rect class="basic label-container" style="" x="-81.1328125" y="-27" width="162.265625" height="54"/><g class="label" style="" transform="translate(-51.1328125, -12)"><rect/><foreignObject width="102.265625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Proxy / Router</p></span></div></foreignObject></g></g><g class="node default  " id="flowchart-Global-3" transform="translate(815.4296875, 61.378257751464844)"><path d="M0,14.585503020204122 a87.53125,14.585503020204122 0,0,0 175.0625,0 a87.53125,14.585503020204122 0,0,0 -175.0625,0 l0,77.58550302020413 a87.53125,14.585503020204122 0,0,0 175.0625,0 l0,-77.58550302020413" class="basic label-container" style="" label-offset-y="14.585503020204122" transform="translate(-87.53125, -53.37825453030619)"/><g class="label" style="" transform="translate(-80.03125, -14)"><rect/><foreignObject width="160.0625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel "><p>Global PostgreSQL<br />(Customer / Metadata)</p></span></div></foreignObject></g></g></g></g></g></svg></div>
<h3>When to Evolve</h3>
<p>Watch for <strong>clear signals</strong>, not hypotheticals:</p>
<ul>
<li><strong>Latency violations</strong>: Queries and operations consistently missing SLAs</li>
<li><strong>Cost curves</strong>: Database costs growing faster than revenue</li>
<li><strong>Query complexity</strong>: Application code contorting itself to work around storage limits</li>
<li><strong>Operational pain</strong>: Backups, replication, or scaling operations becoming frequent fire drills</li>
</ul>
<h4>The Evolution Process</h4>
<p>When these signals appear, follow this process:</p>
<ol>
<li><strong>Identify the bottleneck touchpoint</strong>: Which access pattern is breaking? Be specific.</li>
<li><strong>Evaluate alternatives</strong>: What technologies solve <em>this</em> constraint? Not &quot;what's popular&quot;, but &quot;what addresses this specific, measured problem&quot;.</li>
<li><strong>Implement behind the data layer</strong>: Swap storage without touching application code.</li>
<li><strong>Migrate incrementally</strong>: Run old and new systems in parallel. Achieve very low or even zero downtime.</li>
</ol>
<h4>Why This Pathway Wins</h4>
<ul>
<li><strong>Pay costs only when benefits are clear</strong></li>
<li><strong>Not locked into early decisions</strong></li>
<li><strong>Proven by experience</strong>: Stack Overflow, GitHub, and Stripe all scaled this way; incrementally, deliberately, and without Hail Mary rewrites</li>
</ul>
<hr />
<h2>Summary: The Real Competitive Advantage</h2>
<p>Most teams think scalability is about picking the right database, but it's not ...</p>
<p><strong>It's about building a system that can evolve faster than the competition.</strong></p>
<h3>The Hidden Cost of &quot;Best Practices&quot;</h3>
<p>Microservices, event buses, and specialized databases all have their place. But adopting them early trades <strong>velocity for theoretical scale</strong>.</p>
<p><em>Competitors that ship faster and defer these costs will beat you to market. And in most cases, they'll reach your scale before you've finished configuring Kubernetes.</em></p>
<h3>The Pathway Gives You Both</h3>
<ol>
<li><strong>Ship fast</strong> with simple, boring tech</li>
<li><strong>Evolve deliberately</strong> when constraints become clear</li>
<li><strong>Never rewrite</strong> because your data layer absorbs the changes</li>
</ol>
<h3>The Final Insight</h3>
<p>Most architecture advice tells you what to build. This article tells you what <strong>not</strong> to build ... yet.</p>
<p><strong>That difference is worth millions in saved engineering time and preserved velocity.</strong></p>
<p>Successful companies aren't building with fancier databases. They're succeeding by <strong>shipping faster</strong> whilst <strong>keeping their options open</strong>.</p>
<hr />
<h2>Appendix: Technology Reference</h2>
<p>When you do need to evolve, here's a starting point for mapping touchpoints to technologies. This is not prescriptive.  Your constraints matter more than these labels.</p>
<ul>
<li><strong>Transactional (high volume)</strong>: Sharded / Distributed SQL â€” CitusDB, CockroachDB, Spanner, NewSQL</li>
<li><strong>Analytical/Reporting</strong>: ClickHouse, TimescaleDB, or stay with PostgreSQL + read replicas</li>
<li><strong>Graph traversal</strong>: Relational with recursive queries and smart indexing or specialised DBs (Neo4j, JanusGraph + Cassandra)</li>
<li><strong>Full-text search</strong>: Elasticsearch, Meilisearch</li>
<li><strong>High-throughput writes with predictable/restricted queries</strong>: Cassandra, ScyllaDB</li>
<li><strong>Time-series</strong>: TimescaleDB, InfluxDB</li>
</ul>

    </div>

    
    
    <nav class="post-navigation post-navigation-bottom">
        <div class="nav-previous">
            
                <a href="https://chrisfrequency.com/posts/introducing-the-resonance-protocol" rel="prev">
                    <span class="meta-nav">&larr;</span> Introducing the Resonance Protocol
                </a>
            
        </div>
        <div class="nav-next">
            
        </div>
    </nav>
    


    
    <hr class="collaborator-divider">
    <div class="post-credits">
        <span class="collaborator-prefix">ðŸ¤</span>
        <em>Co-created with: </em>
        <span class="collaborator-name">Claude Sonnet 4.5</span>
    </div>
    
</article>

        </main>

        <footer class="site-footer">
            <p>&copy; 2026 Chris Leow | <a href="https://chrisfrequency.com/rss.xml" title="RSS Feed" class="rss-link"><img src="https://chrisfrequency.com/assets/rss_icon.svg" alt="RSS Feed" class="rss-icon"></a></p>
        </footer>
    </div>
</body>
</html>